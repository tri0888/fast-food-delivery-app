# admin.screen.test

| ID | Mô tả test case | Inter-test case Dependence | Quy trình kiểm thử | Kết quả mong đợi | Dữ liệu kiểm thử | Kết quả |
| --- | --- | --- | --- | --- | --- | --- |
| SCREEN-ADMIN-001 | Admin thêm món mới kèm hộp thoại xác nhận | Không | 1. Set `sessionStorage.token = PLAYWRIGHT_ADMIN_TOKEN` trước khi vào trang<br>2. Stub tất cả `/api/**`, riêng `POST /api/food/add` trả `{ success: true, message: 'Food Added' }` và ghi lại payload<br>3. Truy cập `/add`, upload file ảnh giả và điền Name/Description/Price/Stock<br>4. Nhấn `ADD`, xác nhận modal rồi đợi Toastify xuất hiện | Toast thành công hiển thị "Food Added", form được reset, request thêm món gửi header `token: playwright-admin` và payload chứa `Cart Lab Special` | Token `'playwright-admin'`, payload text `Cart Lab Special`, price `18`, stock `7`, file `add.png` | Playwright (admin/e2e/specs/foods/add-product.spec.ts) |
| SCREEN-ADMIN-002 | Admin chỉnh sửa món đang có từ trang danh sách | Không | 1. Inject token admin và stub `GET /api/food/list` trả danh sách chứa `Automation Pizza`<br>2. Stub `PATCH /api/food/edit` để ghi payload và trả message "Food Updated"<br>3. Vào `/list`, bấm link Edit của dòng mục tiêu rồi chờ URL `/edit/food-001`<br>4. Thay đổi tên/giá và nhấn `UPDATE`, xác nhận dialog | Toast hiển thị "Food Updated", điều hướng quay lại `/list`, payload gửi lên chứa tên mới `Automation Pizza XL` và price `25`, header bao gồm admin token | Token `'playwright-admin'`, mock food `_id: 'food-001'`, form values `Automation Pizza XL`, `25` | Playwright (admin/e2e/specs/foods/update-product.spec.ts) |
| SCREEN-ADMIN-003 | Admin xoá món khỏi danh sách sau khi xác nhận | Không | 1. Inject token admin và stub `GET /api/food/list` trả món `Temp Burger`<br>2. Stub `POST /api/food/remove` để ghi payload và trả `{ success: true, message: 'Food Removed' }`<br>3. Vào `/list`, tìm dòng chứa `Temp Burger` và nhấn icon xoá<br>4. Chấp nhận dialog (nút "Xóa") và quan sát toast | Toast hiển thị "Food Removed", payload remove chứa `_id = food-101`, request header có admin token | Token `'playwright-admin'`, mock food `_id: 'food-101', name: 'Temp Burger'` | Playwright (admin/e2e/specs/foods/delete-product.spec.ts) |
| SCREEN-ADMIN-004 | Add product báo lỗi khi thiếu dữ liệu bắt buộc | Không | 1. Inject token admin, stub `/api/food/add` trả `{ success: false, message: 'Food information cannot be left blank' }`<br>2. Vào `/add`, upload ảnh nhưng điền Name/Description chỉ toàn khoảng trắng<br>3. Submit, xác nhận dialog | Toast error hiển thị thông điệp, form không bị reset, request vẫn gửi header token hợp lệ | Token `'playwright-admin'`, file `add.png`, payload Name/Description `'  '` | Playwright (admin/e2e/specs/foods/add-product.spec.ts) |
| SCREEN-ADMIN-005 | Edit product giữ nguyên trang khi backend trả lỗi validate | SCREEN-ADMIN-002 | 1. Inject token admin, stub `GET /api/food/list` trả `Automation Pizza` và `/api/food/edit` trả `{ success: false, message: 'Food information cannot be left blank' }`<br>2. Từ `/list` mở trang Edit và thay tên thành chuỗi khoảng trắng<br>3. Submit + xác nhận dialog | Toast error hiển thị, URL vẫn `/edit/food-001`, payload bị server từ chối, không điều hướng về list | Token `'playwright-admin'`, mock food `_id: 'food-001'`, name `'  '` | Playwright (admin/e2e/specs/foods/update-product.spec.ts) |
