# products.api.test

| ID | Test level | Mô tả test case | Inter-test case Dependence | Quy trình kiểm thử | Kết quả mong đợi | Dữ liệu kiểm thử | Kết quả |
| --- | --- | --- | --- | --- | --- | --- | --- |
| API_FOOD_01 | Integration | Verify thêm món ăn (Add Food) thành công | Admin Token | 1. Đăng nhập admin lấy token<br>2. `POST /api/food/add` với form-data đầy đủ trường + ảnh<br>3. Đọc response và DB | HTTP `201`, `{ success: true, data.name = 'Matrix Pho' }` (backend hiện trả `200`, ghi chú bug) | `TD-API-PRODUCTS-BASE-PAYLOAD`, `TD-API-PRODUCTS-FILES` | FAIL |
| API_FOOD_02 | Integration | Verify thêm món ăn thất bại với Giá tiền âm | Admin Token | 1. Chuẩn bị form với `price = -5000`<br>2. `POST /api/food/add`<br>3. Ghi nhận phản hồi | HTTP `400`, message báo giá phải >0 | `TD-API-PRODUCTS-BASE-PAYLOAD` | PASS |
| API_FOOD_03 | Integration | Verify thêm món ăn thất bại với Giá tiền = 0 | Admin Token | 1. Chuẩn bị form với `price = 0`<br>2. `POST /api/food/add`<br>3. Quan sát phản hồi | HTTP `400`, message báo giá phải >0 | `TD-API-PRODUCTS-BASE-PAYLOAD` | PASS |
| API_FOOD_04 | Integration | Verify thêm món ăn thất bại với Giá tiền quá lớn | Admin Token | 1. Chuẩn bị form với `price = 9,999,999,999`<br>2. `POST /api/food/add`<br>3. Kiểm tra mã lỗi | HTTP `400` hoặc server từ chối; Jest đang báo backend chấp nhận giá lớn (bug) | `TD-API-PRODUCTS-BASE-PAYLOAD` | FAIL |
| API_FOOD_05 | Integration | Verify sửa món ăn cập nhật đúng thông tin | API_FOOD_01 | 1. Tạo món trước đó<br>2. `PATCH /api/food/edit` để đổi name/price/stock<br>3. Đọc DB sau update | HTTP `200`, DB phản ánh name/price mới | `TD-API-PRODUCTS-BASE-PAYLOAD` | PASS |
| API_FOOD_06 | Integration | Verify xóa món ăn thành công | API_FOOD_01 | 1. Bảo đảm có `foodId` hợp lệ<br>2. `POST /api/food/remove` với `id` món<br>3. Query DB xác thực | HTTP `200/204`, Food biến mất khỏi DB | `TD-API-PRODUCTS-BASE-PAYLOAD` | PASS |
| API_FOOD_07 | Integration | Verify danh sách món hỗ trợ filter theo tên | Không | 1. Seed nhiều món, trong đó một chứa chuỗi `Pizza`<br>2. `GET /api/food/list?q=Pizza`<br>3. Đối chiếu danh sách trả về | HTTP `200`, data chỉ gồm món tên Pizza (endpoint hiện trả toàn bộ, cần fix) | `TD-API-PRODUCTS-BASE-PAYLOAD` | FAIL |
| API_FOOD_08 | Integration | Verify danh sách trả về rỗng khi từ khóa không khớp | Không | 1. Seed món nhưng không có chuỗi `XYZ123`<br>2. `GET /api/food/list?q=XYZ123`<br>3. Kiểm tra `data` | HTTP `200`, `data = []`; backend hiện trả toàn bộ (bug) | `TD-API-PRODUCTS-BASE-PAYLOAD` | FAIL |
| API_FOOD_09 | Integration | Verify upload ảnh sai định dạng bị từ chối | Admin Token | 1. Chuẩn bị form `image=invalid.txt`<br>2. `POST /api/food/add`<br>3. Quan sát phản hồi | HTTP `400`, `{ status: 'fail' }`; hiện backend chưa validate MIME (bug) | `TD-API-PRODUCTS-BASE-PAYLOAD`, `TD-API-PRODUCTS-FILES` | FAIL |
| API_FOOD_10 | Integration | Verify truy cập chi tiết món ăn với ID không tồn tại | Không | 1. Gửi `GET /api/food/000000000000000000000000`<br>2. Đọc response<br>3. Đối chiếu mã lỗi | HTTP `404`, thông điệp báo không tìm thấy | `TD-API-COMMON-NULL-ID` | PASS |
